# 主从复制原理
## 1.mysql复制类型
- 基于语句的复制（sql)
- 基于行的复制(记录）
- 混合类型的复制

## 2.mysql主从复制的工作过程
- 两个日志文件

- 三个线程

  >  master:二进制日志文件 binlog
  >  dump线程
  >
  >  slave:中继日志文件 relaylog
  >  io线程
  >  sql线程

- 三个线程如何工作：

  - 主从复制主要是通过日志文件进行恢复
    master上的dump线程，把数据同步到二进制日志中
  - slave上的io线程，请求与master的二进制文件数据同步，从而进行同步到自己的中继日志中
  - slave上的sql线程，把自己中继日志中的文件，同步到slave数据库中

# Mysql读写分离

## 1.读写分离原理

- 只在主服务器上写，只在从服务器上读
- 主数据库处理事务性查询，从数据库处理select查询
- 数据库复制用于将事务性查询的变更同步到集群中的从数据库

## 2.读写分离方案

- 基于程序代码实现

- 基于中间代理层实现

- Mysql-Proxy

- Amoeba

  >  Amoeba(中间代理层）：
  >  控制着mysql集群中读和写的分配
  >  间接对接客户端

## 3.读写分离存在的意义

>  数据库的“写”操作比较耗时的
>  数据库的“读”比较快
>  读写分离解决的是：数据库的写入，影响了查询的效率

## 4.什么时候要读写分离

> 数据库不一定要读写分离， 如果程序使用数据库比较多，更新少，查询多的情况下会考虑使用利用数据库主从复制，读写分离可分担数据库压力，提高性能

